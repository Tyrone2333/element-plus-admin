var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var W=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>{for(var n in t||(t={}))J.call(t,n)&&W(e,n,t[n]);if(R)for(var n of R(t))Z.call(t,n)&&W(e,n,t[n]);return e},F=(e,t)=>Q(e,Y(t));import{k as M,h as U,b as O,w as P,y as s,z as i,A as f,B as u,C as l,T as ee,M as te,N as B,H as p,O as T,F as g,P as N,Q as k,R as y,I,S as ne,U as $,V as j,r as D,n as A,W as oe,G as ae,X as se}from"./element-plus.76e3bf80.js";import{a as E,b as w,_ as L,c as le,t as re}from"./index.b8782f65.js";import{U as ue}from"./elIcon.e93fbf53.js";const ie=M({name:"LayoutContent",setup(){const e=E(),{getSetting:t,getTags:n}=w(),o=U(()=>e.path);let a=O({cachedViews:[...n.cachedViews]});return P(()=>n.cachedViews.length,()=>a.cachedViews=[...n.cachedViews]),{key:o,data:a,setting:t}}});function ce(e,t,n,o,a,c){const r=s("router-view"),_=s("el-icon-caret-top"),m=s("el-icon"),h=s("el-backtop"),d=s("el-scrollbar");return i(),f(d,null,{default:u(()=>[l(r,null,{default:u(({Component:b})=>[l(ee,{name:"fade-transform",mode:"out-in"},{default:u(()=>[(i(),f(te,{include:e.setting.showTags?e.data.cachedViews:[]},[(i(),f(B(b),{key:e.key,class:"page m-3 relative"}))],1032,["include"]))]),_:2},1024)]),_:1}),l(h,{target:".layout-main-content>.el-scrollbar>.el-scrollbar__wrap",bottom:15,right:15},{default:u(()=>[p("div",null,[l(m,null,{default:u(()=>[l(_)]),_:1})])]),_:1})]),_:1})}var de=L(ie,[["render",ce],["__scopeId","data-v-807d996a"]]);const pe=M({name:"MenubarItem",props:{menuList:{type:Object,default:()=>({})}},setup(){return{UseElIcon:ue}}});function me(e,t,n,o,a,c){const r=s("menubar-item",!0),_=s("el-menu-item-group"),m=s("el-sub-menu"),h=s("el-menu-item");return e.menuList.children&&e.menuList.children.length>0?(i(),f(m,{key:e.menuList.path,index:e.menuList.path},{title:u(()=>[(i(),f(B(e.UseElIcon(e.menuList.meta.icon||"el-icon-location")))),p("span",null,T(e.menuList.meta.title),1)]),default:u(()=>[l(_,null,{default:u(()=>[(i(!0),g(k,null,N(e.menuList.children,d=>(i(),f(r,{key:d.path,index:d.path,"menu-list":d},null,8,["index","menu-list"]))),128))]),_:1})]),_:1},8,["index"])):(i(),f(h,{key:e.menuList.path,index:e.menuList.path},{title:u(()=>[y(T(e.menuList.meta.title),1)]),default:u(()=>[(i(),f(B(e.UseElIcon(e.menuList.meta.icon||"el-icon-setting"))))]),_:1},8,["index"]))}var _e=L(pe,[["render",me]]);const he=e=>{const t=n=>{let o=[];return n.filter(a=>!a.meta.hidden).forEach(a=>{let c=a.children&&a.children.filter(_=>!_.meta.hidden),r=a;!a.meta.alwaysShow&&c&&c.length===1&&([r]=c),o.push(r),r.children&&r.children.length>0&&(o[o.length-1].children=t(r.children))}),o};return t(e)},ge=M({name:"LayoutMenubar",components:{MenubarItem:_e},setup(){const e=E(),t=le(),{getMenubar:n,setRoutes:o,changeCollapsed:a,getSetting:c}=w(),r=he(n.menuList);o(r);const _=U(()=>e.meta.activeMenu?e.meta.activeMenu:e.path);return{getMenubar:n,filterMenubarData:r,activeMenu:_,onOpenChange:h=>{t.push({path:h}),n.status===2&&a()},getSetting:c}}});function fe(e,t,n,o,a,c){const r=s("menubar-item"),_=s("el-menu");return i(),f(_,{mode:e.getMenubar.isPhone?"vertical":e.getSetting.mode,"default-active":e.activeMenu,collapse:e.getMenubar.status===1||e.getMenubar.status===3,class:I({"el-menu-vertical-demo":!0,"w-64":e.getMenubar.status===0||e.getMenubar.status===2,"w-0":e.getMenubar.status===3,"w-16":e.getMenubar.status===1,"w-full":e.getSetting.mode==="horizontal"&&!e.getMenubar.isPhone}),"collapse-transition":!1,"unique-opened":!0,onSelect:e.onOpenChange},{default:u(()=>[(i(!0),g(k,null,N(e.filterMenubarData,m=>(i(),f(r,{key:m.path,index:m.path,"menu-list":m},null,8,["index","menu-list"]))),128))]),_:1},8,["mode","default-active","collapse","class","onSelect"])}var X=L(ge,[["render",fe]]),G="./assets/icon.9764f0e7.png";const be=e=>{const t=()=>{const o=[],a=["Dashboard","RedirectPage"];return e.matched[0]&&a.includes(e.matched[0].name)||e.matched.forEach(c=>{const r={title:c.meta.title,path:c.path};o.push(r)}),o};let n=O({breadcrumbList:t()});return P(()=>e.path,()=>n.breadcrumbList=t()),{data:n}},ve=M({name:"LayoutNavbar",components:{LayoutMenubar:X},setup(){const{getMenubar:e,getUserInfo:t,changeCollapsed:n,logout:o,getSetting:a}=w(),c=E();return F(S({getMenubar:e,userInfo:t,changeCollapsed:n,logout:o},be(c)),{getSetting:a,icon:G})}}),ye={key:0,class:"flex items-center px-4 flex-wrap h-12 leading-12"},we={class:"px-4"},$e=y("\u4E3B\u9875"),ke={key:1,class:"flex items-center px-4 flex-wrap h-12 flex-1"},Me={class:"layout-sidebar-logo flex relative shadow-lg w-40 leading-12 items-center"},Le=["src"],Ce={key:0,class:"pl-2"},Te={class:"layout-sidebar-menubar flex flex-1 overflow-hidden"},Ee={class:"flex items-center flex-row-reverse px-4 min-width-32"},Se={class:"el-dropdown-link flex flex-center px-2"},Ie={class:"ml-2"},Ne=y("\u4E2A\u4EBA\u4E2D\u5FC3"),Ve=y("\u9879\u76EE\u5730\u5740"),xe=y("\u9000\u51FA\u767B\u5F55");function ze(e,t,n,o,a,c){const r=s("el-icon-expand"),_=s("el-icon-fold"),m=s("el-icon"),h=s("el-breadcrumb-item"),d=s("el-breadcrumb"),b=s("layout-menubar"),v=s("el-avatar"),V=s("el-icon-arrow-down"),C=s("el-link"),x=s("el-dropdown-item"),q=s("el-dropdown-menu"),H=s("el-dropdown");return i(),g(k,null,[e.getSetting.mode==="vertical"||e.getMenubar.isPhone?(i(),g("div",ye,[l(m,{class:"text-2xl cursor-pointer h-12 leading-12",onClick:e.changeCollapsed},{default:u(()=>[e.getMenubar.status?(i(),f(r,{key:0})):(i(),f(_,{key:1}))]),_:1},8,["onClick"]),p("div",we,[l(d,{separator:"/"},{default:u(()=>[l(ne,{name:"breadcrumb"},{default:u(()=>[l(h,{key:"/",to:{path:"/"}},{default:u(()=>[$e]),_:1}),(i(!0),g(k,null,N(e.data.breadcrumbList,z=>(i(),f(h,{key:z.path,to:z.path},{default:u(()=>[y(T(z.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),_:1})])])):(i(),g("div",ke,[p("div",Me,[p("img",{class:"w-6 h-8",src:e.icon},null,8,Le),e.getMenubar.status===0||e.getMenubar.status===2?(i(),g("span",Ce,"hsianglee")):$("",!0)]),p("div",Te,[l(b)])])),p("div",Ee,[l(H,null,{dropdown:u(()=>[l(q,null,{default:u(()=>[l(x,null,{default:u(()=>[l(C,{href:"https://github.com/hsiangleev",target:"_blank",underline:!1},{default:u(()=>[Ne]),_:1})]),_:1}),l(x,null,{default:u(()=>[l(C,{href:"https://github.com/hsiangleev/element-plus-admin",target:"_blank",underline:!1},{default:u(()=>[Ve]),_:1})]),_:1}),l(x,{divided:"",onClick:e.logout},{default:u(()=>[xe]),_:1},8,["onClick"])]),_:1})]),default:u(()=>[p("span",Se,[l(v,{size:30,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}),p("span",Ie,T(e.userInfo.name),1),l(m,null,{default:u(()=>[l(V)]),_:1})])]),_:1})])],64)}var Be=L(ve,[["render",ze],["__scopeId","data-v-a2de7a56"]]);const De=()=>{const{removeOtherTagNav:e,refreshViews:t}=w(),n=E(),o=O({left:"0px",top:"0px",display:"none"}),a=D(null);let c;const r=(h,d)=>{c=h,o.display="block",A(()=>{var C;if(!a.value)return;const b=(C=a.value)==null?void 0:C.parentNode;let v=d.clientX-b.offsetLeft-5,V=d.clientY-b.offsetTop+10;d.clientX+a.value.offsetWidth>document.body.offsetWidth&&(v=v-a.value.offsetWidth+15),o.left=`${v}px`,o.top=`${V}px`})},_=()=>t(c.path===n.path?"replace":"push",c.path,c.name),m=()=>e(c);return document.body.addEventListener("click",()=>o.display="none"),{menuPos:o,contextRightMenu:r,refresh:_,rightMenuEl:a,closeOther:m}},Ae=()=>{const{getTags:e}=w(),{tagsList:t,cachedViews:n}=e,o=D(null),a=D([]),c=r=>r&&a.value.push(r);return P(()=>t.length,()=>A(()=>{!o.value||(o.value.update(),A(()=>{const r=a.value.filter(m=>m).reduce((m,h)=>m+h.offsetWidth+6,0);if(!o.value)return;const _=r-o.value.wrap$.offsetWidth+70;_>0&&(o.value.wrap$.scrollLeft=_)}))})),oe(()=>{a.value=[]}),{tagsList:t,scrollbar:o,layoutTagsItem:a,cachedViews:n,getTagsDom:c}},Oe=M({name:"LayoutTags",setup(){const{removeAllTagNav:e,addCachedViews:t,removeTagNav:n}=w(),o=E(),a=c=>n({cPath:o.path,tagsList:c});return j(()=>{t({name:o.name,noCache:o.meta.noCache})}),S(S({removeTag:a,removeAllTagNav:e},Ae()),De())}}),Pe={class:"shadow border-b border-gray-100 px-3 overflow-hidden relative z-10"},Re={class:"layout-tags-container whitespace-nowrap"},We=["onContextmenu"],Fe={key:0,class:"rounded-full inline-block w-2 h-2 bg-white -ml-1 mr-1"};function Ue(e,t,n,o,a,c){const r=s("router-link"),_=s("el-icon-close"),m=s("el-icon"),h=s("el-scrollbar");return i(),g(k,null,[p("div",Pe,[l(h,{ref:"scrollbar","wrap-class":"scrollbar-wrapper"},{default:u(()=>[p("div",Re,[(i(!0),g(k,null,N(e.tagsList,d=>(i(),g("span",{key:d.path,ref_for:!0,ref:e.getTagsDom,class:I(["border border-gray-200 px-2 py-1 mx-1 cursor-pointer",{"layout-tags-active":d.isActive}]),onContextmenu:se(b=>e.contextRightMenu(d,b),["prevent"])},[d.isActive?(i(),g("i",Fe)):$("",!0),l(r,{to:d.path},{default:u(()=>[y(T(d.title),1)]),_:2},1032,["to"]),e.tagsList.length>1?(i(),f(m,{key:1,class:"text-xs hover:bg-gray-300 hover:text-white rounded-full leading-3 p-0.5 ml-1 -mr-1",onClick:b=>e.removeTag(d)},{default:u(()=>[l(_)]),_:2},1032,["onClick"])):$("",!0)],42,We))),128))])]),_:1},512)]),p("ul",{ref:"rightMenuEl",class:"border border-gray-200 absolute w-24 leading-none bg-white shadow-md rounded-lg py-0.5 z-10",style:ae(e.menuPos)},[p("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:t[0]||(t[0]=(...d)=>e.refresh&&e.refresh(...d))},"\u5237\u65B0"),p("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:t[1]||(t[1]=(...d)=>e.closeOther&&e.closeOther(...d))},"\u5173\u95ED\u5176\u5B83"),p("li",{class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:t[2]||(t[2]=(...d)=>e.removeAllTagNav&&e.removeAllTagNav(...d))},"\u5173\u95ED\u6240\u6709")],4)],64)}var je=L(Oe,[["render",Ue]]);const Xe=M({name:"Layout",components:{LayoutContent:de,LayoutMenubar:X,LayoutNavbar:Be,LayoutTags:je},setup(){const{changeDeviceWidth:e,changeCollapsed:t,getMenubar:n,getSetting:o}=w();return j(async()=>{e();const a=re(300);let c=async function(){await a(),e()};window.addEventListener("resize",c,!0)}),{getMenubar:n,getSetting:o,changeCollapsed:t,icon:G}}}),Ge={class:"layout flex h-screen"},qe={class:"layout-sidebar-logo flex h-12 relative flex-center shadow-lg"},He=["src"],Ke={key:0,class:"pl-2"},Qe={class:"layout-sidebar-menubar flex flex-1 overflow-hidden"},Ye={class:"layout-main flex flex-1 flex-col overflow-x-hidden overflow-y-auto"},Je={class:"layout-main-navbar flex justify-between items-center h-12 shadow-sm overflow-hidden relative z-10"},Ze={key:0,class:"layout-main-tags h-8 leading-8 text-sm text-gray-600 relative"},et={class:"layout-main-content flex-1 overflow-hidden"},tt={class:"layout-sidebar-sidesetting fixed right-0 top-64 z-10"};function nt(e,t,n,o,a,c){const r=s("layout-menubar"),_=s("el-scrollbar"),m=s("layout-navbar"),h=s("layout-tags"),d=s("layout-content"),b=s("layout-side-setting");return i(),g("div",Ge,[p("div",{class:I(["layout-sidebar-mask fixed w-screen h-screen bg-black bg-opacity-25 z-20",{hidden:e.getMenubar.status!==2}]),onClick:t[0]||(t[0]=(...v)=>e.changeCollapsed&&e.changeCollapsed(...v))},null,2),e.getSetting.mode==="vertical"||e.getMenubar.isPhone?(i(),g("div",{key:0,class:I(["layout-sidebar flex flex-col h-screen transition-width duration-200 shadow",{"w-64":e.getMenubar.status===0||e.getMenubar.status===2,"w-0":e.getMenubar.status===3,"w-16":e.getMenubar.status===1,"absolute z-30":e.getMenubar.status===2||e.getMenubar.status===3}])},[p("div",qe,[p("img",{class:"w-8 h-8",src:e.icon},null,8,He),e.getMenubar.status===0||e.getMenubar.status===2?(i(),g("span",Ke,"hsianglee")):$("",!0)]),p("div",Qe,[l(_,{"wrap-class":"scrollbar-wrapper"},{default:u(()=>[l(r)]),_:1})])],2)):$("",!0),p("div",Ye,[p("div",Je,[l(m)]),e.getSetting.showTags?(i(),g("div",Ze,[l(h)])):$("",!0),p("div",et,[l(d)])]),p("div",tt,[l(b)])])}var rt=L(Xe,[["render",nt],["__scopeId","data-v-7fe660de"]]);export{rt as default};
